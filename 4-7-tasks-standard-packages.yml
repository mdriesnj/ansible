    - name: Distribution
      debug: msg="{{ ansible_distribution }}"

    - name: pause
      pause:
        seconds: 10
#-------- Alpine------------------------
    - name: Alpine install 
      become: true
      apk:
        name: wget, curl, git, zsh, helix, neofetch, ranger, btop, fzf, fd, qemu-guest-agent, eza, libcap-getcap, libcap-setcap, tzdata, ripgrep, shadow, sudo
        state: latest
        update_cache: true
      when: inventory_hostname in groups['new_alpine_container']

#    - name: Alpine install not first run
#      beome: true
#      apk:
#        name: wget, curl, git, zsh, helix, neofetch, ranger, btop, fzf, fd, qemu-guest-agent, eza, libcap-getcap, libcap-setcap, tzdata, ripgrep, shadow, sudo
#        state: latest
#        update_cache: true
#      when: ansible_distribution == 'Alpine' and inventory_hostname not in groups['new_alpine_container']


#-------- Debian-------------------------    
    - name: Debian Update apt cache
      become: true
      apt:
        update_cache: yes
      when: ansible_distribution == 'Debian' or ansible_distribution =='Ubuntu'

    - name: Debian packages
      become: true
      apt:
        name: 
          - wget
          - curl
          - sudo
          - git 
          - zsh
          - vim
 #         - stow
          - net-tools   
          - ranger
          - neofetch
          - neovim 
          - bat
          - ncdu
          - btop
          - fzf
          - tldr
          - gdu
          - fd-find
          - xz-utils
#          - npm
        state: latest
      when: ansible_distribution == 'Debian' or ansible_distribution =='Ubuntu'

#-------- Alm-------------------------    

    - name: alma dnf install 1
      become: true
      dnf:
        name: https://dl.fedoraproject.org/pub/epel/epel-release-latest-9.noarch.rpm
        state: present
        validate_certs: no
        disable_gpg_check: true
      when: ansible_distribution == 'AlmaLinux'
      
    - name: alma dnf install 2
      become: true
      dnf:
        name: https://dl.fedoraproject.org/pub/epel/epel-next-release-latest-9.noarch.rpm
        state: present
        validate_certs: no
        disable_gpg_check: true
      when: ansible_distribution == 'AlmaLinux'        

    - name: alma packages
      become: true
      yum:
        name: 
          - tar
          - wget
          - curl
          - sudo
          - git 
          - zsh
          - vim
 #         - stow
          - net-tools  
          - neofetch
          - neovim 
          - bat 
          - ncdu
          - btop
          - fzf
          - tldr
          - fd-find
          - xz
       #   - gdu
  #        - ranger not in yum
        state: latest
      when: ansible_distribution == 'AlmaLinux'

      
    - name: "get eza"
      become: true
      get_url:
        url: https://github.com/eza-community/eza/releases/latest/download/eza_x86_64-unknown-linux-gnu.tar.gz
        dest: /tmp/
        mode: 0755
      when: ansible_distribution == 'AlmaLinux' or ansible_distribution == 'Debian' or ansible_distribution =='Ubuntu'

    - name: "extract eza"
      become: true
      unarchive:
        remote_src: yes
        src: /tmp/eza_x86_64-unknown-linux-gnu.tar.gz
        dest: /usr/bin/
      when: ansible_distribution == 'AlmaLinux' or ansible_distribution == 'Debian' or ansible_distribution =='Ubuntu'


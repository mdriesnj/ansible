    - name: Distribution
      debug: msg="{{ ansible_distribution }}"

 #   - name: pause
 #     pause:
 #       seconds: 10

#-------- Alpine------------------------
    - name: Alpine install 
      become: true
      apk:
        name: btop, curl, eza, fd, fzf, git, helix, libcap-getcap, libcap-setcap, neofetch, qemu-guest-agent, ranger, ripgrep, shadow, tzdata, wget, zsh
        state: latest
        update_cache: true
      when: inventory_hostname in groups['new_alpine']

#-------- Debian-------------------------    
    - name: Debian Update apt cache
      become: true
      apt:
        update_cache: yes
      when: inventory_hostname in groups['new_debian']

    - name: Debian packages
      become: true
      apt:
        name: 
          - btop
          - curl
          - fd-find
          - fzf
          - git 
          - neofetch
          - qemu-guest-agent
          - net-tools   
          - ranger
          - ripgrep
          - tldr
          - wget
          - zsh
          - xy-util
        state: latest
      when: inventory_hostname in groups['new_debian']

 #   - name: Debian Update apt cache
 #     become: true
 #     apt:
 #       update_cache: yes
 #     when: inventory_hostname in groups['new_debian_container']

    - name: Debian remove postfix 
      become: true
      apt:
        name: 
          - postfix
        state: absent
      when: inventory_hostname in groups['new_debian']


#-------- Alm-------------------------    

    - name: alma dnf install 1
      become: true
      dnf:
        name: https://dl.fedoraproject.org/pub/epel/epel-release-latest-9.noarch.rpm
        state: present
        validate_certs: no
        disable_gpg_check: true
      when: ansible_distribution == 'AlmaLinux'
      
    - name: alma dnf install 2
      become: true
      dnf:
        name: https://dl.fedoraproject.org/pub/epel/epel-next-release-latest-9.noarch.rpm
        state: present
        validate_certs: no
        disable_gpg_check: true
      when: ansible_distribution == 'AlmaLinux'        

    - name: alma packages
      become: true
      yum:
        name: 
          - tar
          - wget
          - curl
          - sudo
          - git 
          - zsh
          - vim
 #         - stow
          - net-tools  
          - neofetch
          - neovim 
          - bat 
          - ncdu
          - btop
          - fzf
          - tldr
          - fd-find
          - xz
       #   - gdu
  #        - ranger not in yum
        state: latest
      when: ansible_distribution == 'AlmaLinux'

#-----Eza-------------------------------------------------------

    - name: "get eza"
      become: true
      get_url:
        url: https://github.com/eza-community/eza/releases/latest/download/eza_x86_64-unknown-linux-gnu.tar.gz
        dest: /tmp/
        mode: 0755
      when: inventory_hostname in groups['new_debian']

    - name: "extract eza"
      become: true
      unarchive:
        remote_src: yes
        src: /tmp/eza_x86_64-unknown-linux-gnu.tar.gz
        dest: /usr/bin/
      when: inventory_hostname in groups['new_debian']

#----- Helix-----------------------------------------------------
    - name: "get helix"
      become: true
      get_url:
        url: https://github.com/helix-editor/helix/releases/download/24.03/helix-24.03-x86_64-linux.tar.xz
        dest: /tmp/
        mode: 0755
      when: inventory_hostname in groups['new_debian']

    - name: "extract helix"
      become: true
      unarchive:
        remote_src: yes
        src: /tmp/helix-24.03-x86_64-linux.tar.xz
        dest: /tmp
      when: inventory_hostname in groups['new_debian']

    - name: "copy hx /bin"
      become: true
      copy:
        remote_src: yes
        src: /tmp/helix-24.03-x86_64-linux/hx
        dest: /usr/bin/
        mode: 0755
      when: inventory_hostname in groups['new_debian']

    - name: "make helix runtime location"
      become: true
      file:
        path: /usr/share/helix/runtime
        state: directory
      when: inventory_hostname in groups['new_debian']

    - name: "copy helix runtime /usr/share"
      become: true
      copy:
        remote_src: yes
        src: /tmp/helix-24.03-x86_64-linux/runtime
        dest: /usr/share/helix/
        mode: 0755
      when: inventory_hostname in groups['new_debian']


#     - name: Distribution
#       debug: msg="{{ ansible_distribution }}"

#----Alpine
    - name: Update all installed packages to the latest versions
      become: true
      community.general.apk:
        upgrade: true
        update_cache: true
      when: ansible_distribution == 'Alpine' 

#----Debian
    - name: Debian hosts update apt packages
      become: true
      apt:
        upgrade: yes
        update_cache: yes
      when: (ansible_distribution == 'Debian' or ansible_distribution =='Ubuntu') and inventory_hostname not in groups['pve']


#----Debian - sysctl 
    - name: Debian sysctl updates
      become: true
      ansible.posix.sysctl:
        name: net.ipv6.conf.all.disable_ipv6
        value: 1
        sysctl_set: true
        state: present
        reload: true
      ansible.posix.sysctl:
        name: net.ipv6.conf.default.disable_ipv6
        value: 1
        sysctl_set: true
        state: present
        reload: true
      ansible.posix.sysctl:
        name: net.ipv6.conf.lo.disable_ipv6
        value: 1
        sysctl_set: true
        state: present
        reload: true
      ansible.posix.sysctl:
        name: net.ipv6.conf.tun0.disable_ipv6
        value: 1
        sysctl_set: true
        state: present
        reload: true
      when: (ansible_distribution == 'Debian' or ansible_distribution =='Ubuntu') and inventory_hostname not in groups['pve']


#----Alma
    # - name: update yum package
    #   become: true
    #   yum:
    #     name: '*'
    #     state: latest
    #   when: ansible_distribution == 'AlmaLinux'



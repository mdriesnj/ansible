    - name: Distribution
      debug: msg="{{ ansible_distribution }}"

    - name: pause
      pause:
        seconds: 10
        
    - name : alpine - change root shell with chsh
      beome: true
      shell: chsh -s /bin/zsh
      when: inventory_hostname in groups['new_alpine_container']
      
#    - name: create group mdries
#      become: true
#      group:
#        name: mdries
#      when: ansible_distribution == 'Debian' or ansible_distribution =='Ubuntu' or ansible_distribution =='AlmaLinux'

    - name: alpine - create group sudo
      beome: true
      group:
        name: sudo
      when: inventory_hostname in groups['new_alpine_container']
        
    - name: debian - add user mdries #Add the user james with a bash shell, appending the group admins and developers to the users groups
      become: true
      user:
        name: mdries
  #      shell: /bin/zsh
        groups: users,mdries, sudo
        create_home: yes
 #       password: "{{ '$6$7YGiKSixynhRKuQX$Dch7qgVm3rs6i2ffhB4El9v6RnDPE.EYkcslu9WwtpOpv1VPEiwWk9Sb1cBZjytBV1sj8b1T58NNtbhwHVWLa1' | password_hash('sha512') }}"
        password: "{{ password | password_hash('sha512') }}"
        append: yes
        shell: /bin/zsh
      when: ansible_distribution == 'Debian' or ansible_distribution =='Ubuntu' or ansible_distribution =='AlmaLinux'

    - name: alpine - add user mdries #Add the user james with a bash shell, appending the group admins and developers to the users groups
      beome: true
      user:
        name: mdries
        shell: /bin/zsh
        groups: users, mdries, sudo
        create_home: yes
 #       password: "{{ '$6$7YGiKSixynhRKuQX$Dch7qgVm3rs6i2ffhB4El9v6RnDPE.EYkcslu9WwtpOpv1VPEiwWk9Sb1cBZjytBV1sj8b1T58NNtbhwHVWLa1' | password_hash('sha512') }}"
        password: "{{ password | password_hash('sha512') }}"
        append: yes
        status: present
      when: inventory_hostname in groups['new_alpine_container']

    - name: alpine - add sudo to sudoers
      beome: true
      community.general.sudoers:
        name: sudo to sudoers
        group: sudo
        commands: ALL
     when: inventory_hostname in groups['new_alpine_container']
